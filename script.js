window.addEventListener("load",function(){const e=document.getElementById("status"),l=document.getElementById("result"),r=document.getElementById("layer"),n=document.getElementById("btn"),t=document.getElementById("player1"),a=document.getElementById("player2");let y=!1,p=0,i=[],d=0;for(let e=1;e<=9;e++)i.push(document.getElementById("img"+e));let o,c=["A","B","C","D","E","F","G","H","I"],s=["o","x"];document.getElementById("disp"),document.getElementById("dispx"),document.getElementById("disp3"),document.getElementById("disp4"),document.getElementById("disp5");let u=Math.floor(2*Math.random()),m="x"===s[u]?"o":"x",E={player1:s[u],player2:m};t.src=E.player1+".png",a.src=m+".png";let M,g="player",f=Math.floor(9*Math.random()),I=[!1,!1,!1,!1,!1,!1,!1,!1,!1];function B(l){let r=-1;"GAME OVER"!==e.innerHTML&&((h(c[0],c[1],E.player1,2,1)[0]||h(c[1],c[2],E.player1,0,2)[0]||h(c[0],c[2],E.player1,1,3)[0]||h(c[3],c[4],E.player1,5,4)[0]||h(c[4],c[5],E.player1,3,5)[0]||h(c[3],c[5],E.player1,4,6)[0]||h(c[6],c[7],E.player1,8,7)[0]||h(c[7],c[8],E.player1,6,8)[0]||h(c[6],c[8],E.player1,7,9)[0]||h(c[0],c[3],E.player1,6,10)[0]||h(c[3],c[6],E.player1,0,11)[0]||h(c[0],c[6],E.player1,3,12)[0]||h(c[1],c[4],E.player1,7,13)[0]||h(c[4],c[7],E.player1,1,14)[0]||h(c[1],c[7],E.player1,4,15)[0]||h(c[2],c[5],E.player1,8,16)[0]||h(c[5],c[8],E.player1,2,17)[0]||h(c[2],c[8],E.player1,5,18)[0]||h(c[0],c[4],E.player1,8,19)[0]||h(c[4],c[8],E.player1,0,20)[0]||h(c[0],c[8],E.player1,4,21)[0]||h(c[2],c[4],E.player1,6,22)[0]||h(c[4],c[6],E.player1,2,23)[0]||h(c[2],c[6],E.player1,4,24)[0])&&(r=T[2],!1===I[r]&&(l=r.toString())),(h(c[0],c[1],E.player2,2)[0]||h(c[1],c[2],E.player2,0)[0]||h(c[0],c[2],E.player2,1)[0]||h(c[3],c[4],E.player2,5)[0]||h(c[4],c[5],E.player2,3)[0]||h(c[3],c[5],E.player2,4)[0]||h(c[6],c[7],E.player2,8)[0]||h(c[7],c[8],E.player2,6)[0]||h(c[6],c[8],E.player2,7)[0]||h(c[0],c[3],E.player2,6)[0]||h(c[3],c[6],E.player2,0)[0]||h(c[0],c[6],E.player2,3)[0]||h(c[1],c[4],E.player2,7)[0]||h(c[4],c[7],E.player2,1)[0]||h(c[1],c[7],E.player2,4)[0]||h(c[2],c[5],E.player2,8)[0]||h(c[5],c[8],E.player2,2)[0]||h(c[2],c[8],E.player2,5)[0]||h(c[0],c[4],E.player2,8)[0]||h(c[4],c[8],E.player2,0)[0]||h(c[0],c[8],E.player2,4)[0]||h(c[2],c[4],E.player2,6)[0]||h(c[4],c[6],E.player2,2)[0]||h(c[2],c[6],E.player2,4)[0])&&(r=T[2],!1===I[r]&&(l=r.toString())),"Mr. Bot"===g&&(i[Number(l)].src=E.player2+".png",I[Number(l)]=!0,c[Number(l)]=E.player2,L++,d=Number(l),g="player"))}let L=0;for(let l=0;l<9;l++)i[l].addEventListener("click",function(){if(!1===I[l]&&!0===y){if("player"===g){for(i[l].src=E.player1+".png",c[l]=E.player1,L++,d=l,I[l]=!0;"x"===c[f]||"o"===c[f]&&L<9;)f=Math.floor(9*Math.random());"GAME OVER"!==e.innerHTML&&(M=setTimeout(B,1e3,f.toString()),g="Mr. Bot")}}else 0!==L&&"GAME OVER"!==e.innerHTML||alert("Click on New Game!")});let H=[];function b(e,l,r,n){return H=[],e===l&&l===r?(H.push(!0,e,n),H):[!1,e]}let T=[],v=[];function h(e,l,r,n,t){return T=[],e!==l||l!==r||v.includes(t)?[!1,e]:(v.push(t),T.push(!0,e,n,t),T)}let G=!1;function A(){if("GAME OVER"!==e.innerHTML)if(b(c[0],c[1],c[2])[0]||b(c[3],c[4],c[5])[0]||b(c[6],c[7],c[8])[0]||b(c[0],c[3],c[6])[0]||b(c[1],c[4],c[7])[0]||b(c[2],c[5],c[8])[0]||b(c[0],c[4],c[8])[0]||b(c[2],c[4],c[6])[0]){r.style.visibility="visible",e.innerHTML="GAME OVER";let n=E.player1===H[1]?"Player":"Mr. Bot";if(l.innerHTML="<<<<< "+n+" won >>>>>",n=n.replace(". ",""),!1===G){let e=document.getElementById(n.toLowerCase());p=Number(e.innerHTML),p++,e.innerHTML=p,G=!0}clearInterval(o)}else 9!==L||c.includes("A")||c.includes("B")||c.includes("C")||c.includes("D")||c.includes("E")||c.includes("F")||c.includes("G")||c.includes("H")||c.includes("I")||(r.style.visibility="visible",e.innerHTML="GAME OVER",l.innerHTML="<<<<< It's a tie >>>>>",clearInterval(o))}n.addEventListener("click",function(){!function(){y=!0,G=!1,L=0,v=[],g="player",c=["A","B","C","D","E","F","G","H","I"],H=[],T=[],e.innerHTML="&nbsp;",l.innerHTML="&nbsp;";for(let e=0;e<9;e++)i[e].src="black.png",I[e]=!1}(),r.style.visibility="hidden",o=setInterval(A,1e3)}),r.addEventListener("click",function(){alert("Click on New Game!")})});
